/** Copyright 2018 Amazon.com Inc. or its affiliates. All Rights Reserved. **/
define(["knockoutjs","language","eventLocation","learningObjectNotificationGroup","learningObjectGroups","enums","misc","classification","loClassification","pricingRule","availabilityRule","sellerOfRecord","learningObjectPageUrl","viewModelHelper","duration","stringHelper","argumentNullError","argumentError"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=function(c,d){var p;p=this,p.id=a.observable(n.getPropertyValueOrDefault(c,"Id")),p.kind=a.observable(n.getPropertyValueOrDefault(c,"Kind")),p.displayKind=a.observable(n.getPropertyValueOrDefault(c,"DisplayKind")),p.code=a.observable(n.getPropertyValueOrDefault(c,"Code")),p.title=a.observable(n.getPropertyValueOrDefault(c,"Title")),p.owner=a.observable(n.getPropertyValueOrDefault(c,"Owner")),p.abstract=a.observable(n.getPropertyValueOrDefault(c,"Abstract")),p.description=a.observable(n.getPropertyValueOrDefault(c,"Description")),p.duration=a.observable(new o(n.getPropertyValueOrDefault(c,"Duration"))),p.language=a.observable(new b(n.getPropertyValueOrDefault(c,"Language"))),p.hasEvaluationUrl=a.observable(n.getPropertyValueOrDefault(c,"HasEvaluationUrl")),p.evaluationBaseUrl=a.observable(n.getPropertyValueOrDefault(c,"EvaluationBaseUrl")),p.lastModifiedUtc=a.observable(n.getPropertyValueOrDefault(c,"LastModifiedUtc")),p.displayLastModifiedUtc=a.observable(n.getPropertyValueOrDefault(c,"DisplayLastModifiedUtc")),p.curriculumDependenciesCount=a.observable(n.getPropertyValueOrDefault(c,"CurriculumDependenciesCount")),p.groups=a.observable(new e(n.getPropertyValueOrDefault(c,"Groups"))),p.languageGroups=a.observable((p.groups()&&p.groups().Language||[]).map(function(a){return a.Url=m.getDetailsPageUrl(a.Id,a.Kind),a})),p.creditGroups=a.observable((p.groups()&&p.groups().Credit||[]).map(function(a){return a.Url=m.getDetailsPageUrl(a.Id,a.Kind),a})),p.majorVersion=a.observable(n.getPropertyValueOrDefault(c,"MajorVersion")),p.minorVersion=a.observable(n.getPropertyValueOrDefault(c,"MinorVersion")),p.patch=a.observable(n.getPropertyValueOrDefault(c,"Patch")),p.displayVersion=a.observable(p.majorVersion()+"."+p.minorVersion()+"."+p.patch()),p.isUnlistedString=a.observable(n.getPropertyValueOrDefault(c,"IsUnlisted").toString()),p.isUnlisted=a.computed(function(){return g.parseBool(p.isUnlistedString(),!1)},p),p.displayIsUnlisted=a.computed(function(){return g.boolToYesNo(p.isUnlisted(),!1)},p),p.isStandaloneString=a.observable(n.getPropertyValueOrDefault(c,"IsStandalone").toString()),p.isStandalone=a.computed(function(){return g.parseBool(p.isStandaloneString(),!1)},p),p.displayIsStandalone=a.computed(function(){return g.boolToYesNo(p.isStandalone(),!1)},p),p.statusString=a.observable(n.getPropertyValueOrDefault(c,"Status").toString()),p.displayStatus=a.observable(n.getPropertyValueOrDefault(c,"DisplayStatus")),p.status=a.computed(function(){return g.parseInt(p.statusString())},p),p.jobRoles=a.observableArray([]),p.experienceLevels=a.observableArray([]),p.trainingFormats=a.observableArray([]),p.tags=a.observableArray([]),p.classifications=a.observableArray([]),(n.getPropertyValueOrDefault(c,"Classifications")||[]).forEach(function(a){this.classifications.push(new h(a)),i.isJobRole(a.Id)===!0?this.jobRoles.push(a.Category+" - "+a.Value):i.isExperienceLevel(a.Id)===!0?this.experienceLevels.push(a.Category+" - "+a.Value):i.isTrainingFormat(a.Id)===!0?this.trainingFormats.push(a.Category+" - "+a.Value):this.tags.push(a.Category+" - "+a.Value)},p),p.displayJobRoles=a.observable(a.toJS(p.jobRoles()).join(", ")),p.displayExperienceLevels=a.observable(a.toJS(p.experienceLevels()).join(", ")),p.displayTrainingFormats=a.observable(a.toJS(p.trainingFormats()).join(", ")),p.displayTags=a.observable(a.toJS(p.tags()).join(", ")),p.displayClassificationTags=a.observable("-"),this.classifications().length>0&&p.displayClassificationTags([this.displayExperienceLevels(),this.displayJobRoles(),this.displayTrainingFormats(),this.displayTags()].filter(Boolean).join(" | ")),p.price=a.observable(n.getPropertyValueOrDefault(c,"Price")),p.sellerOfRecord=a.observable(new l(n.getPropertyValueOrDefault(c,"SellerOfRecord"))),p.currency=a.observable(a.utils.clone(p.sellerOfRecord().currency())),p.displayPrice=a.observable("-"),p.currency()&&this.currency().symbol()&&p.displayPrice(g.getDisplayMonetaryString(p.currency().symbol(),p.price())+" ("+p.currency().code()+")"),p.pricingRules=a.observableArray(),(n.getPropertyValueOrDefault(c,"PricingRules")||[]).forEach(function(a){this.pricingRules.push(new j(a))},p),p.availabilityRules=a.observableArray(),(n.getPropertyValueOrDefault(c,"AvailabilityRules")||[]).forEach(function(a){this.availabilityRules.push(new k(a))},p),s.setNotificationGroups(p,c),p.apnDeepLink=a.observable(n.getPropertyValueOrDefault(c,"ApnDeepLink")),p.employeeDeepLink=a.observable(n.getPropertyValueOrDefault(c,"EmployeeDeepLink")),p.customerDeepLink=a.observable(n.getPropertyValueOrDefault(c,"CustomerDeepLink")),p.anonymousDeepLink=a.observable(n.getPropertyValueOrDefault(c,"AnonymousDeepLink")),p.apnOneClickDeepLink=a.observable(n.getPropertyValueOrDefault(c,"ApnOneClickDeepLink")),p.employeeOneClickDeepLink=a.observable(n.getPropertyValueOrDefault(c,"EmployeeOneClickDeepLink")),p.customerOneClickDeepLink=a.observable(n.getPropertyValueOrDefault(c,"CustomerOneClickDeepLink")),p.anonymousOneClickDeepLink=a.observable(n.getPropertyValueOrDefault(c,"AnonymousOneClickDeepLink")),p.detailsPageUrl=a.observable(""),p.editPageUrl=a.observable(""),p.copyPageUrl=a.observable(""),p.auditPageUrl=a.observable(""),p.notificationLogsPageUrl=a.observable(""),d&&p.id()&&(p.detailsPageUrl=a.observable(m.getCustomerDetailsPageUrl(p.kind(),p.id())),p.editPageUrl=a.observable(m.getAdminManagementPageUrl(p.kind(),p.id(),f.adminPageMode.update)),p.copyPageUrl=a.observable(m.getAdminManagementPageUrl(p.kind(),p.id(),f.adminPageMode.copy)),p.auditPageUrl=a.observable(m.getAuditPageUrl(p.kind(),p.id())),p.notificationLogsPageUrl=a.observable(m.getNotificationLogPageUrl(p.id()))),p.isExpanded=a.observable(!1)};return s.setNotificationGroups=function(b,c){var e,f,g,h;if(b&&c){if(b.notificationGroups=a.observableArray([]),c.NotificationGroups&&0!==c.NotificationGroups.length){e=null,g=-1;for(h in c.NotificationGroups)!c.NotificationGroups.hasOwnProperty(h)||c.NotificationGroups[h].Audience&&c.NotificationGroups[h].Audience.FullPath||(g=h,e=c.NotificationGroups[h]);null===e?c.NotificationGroups.splice(0,0,new d({})):0!==Number(g)&&(c.NotificationGroups.splice(g,1),c.NotificationGroups.splice(0,0,e))}else c.NotificationGroups=[{}];for(h in c.NotificationGroups)c.NotificationGroups.hasOwnProperty(h)&&(f=new d(c.NotificationGroups[h]),b.notificationGroups.push(f),d.sortNotificationsByTriggerType(f))}},s.getTemplate=function(a){return{Kind:a,Status:0,Price:0,Currency:{Id:1},Duration:{Unit:0},Language:{Id:1},IsUnlisted:!0}},s});