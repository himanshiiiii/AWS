/** Copyright 2018 Amazon.com Inc. or its affiliates. All Rights Reserved. **/
define(["knockoutjs","language","eventLocation","learningObjectNotificationGroup","enums","misc","classification","loClassification","learningObjectPageUrl","viewModelHelper","duration","stringHelper","argumentNullError","resourceManager"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=function(d){var l,m,o=this;if(o.id=a.observable(j.getPropertyValueOrDefault(d,"Id")),o.kind=a.observable(j.getPropertyValueOrDefault(d,"Kind")),o.code=a.observable(j.getPropertyValueOrDefault(d,"Code")),o.title=a.observable(j.getPropertyValueOrDefault(d,"Title")),o.owner=a.observable(j.getPropertyValueOrDefault(d,"Owner")),o.abstract=a.observable(j.getPropertyValueOrDefault(d,"Abstract")),o.description=a.observable(j.getPropertyValueOrDefault(d,"Description")),o.language=a.observable(new b(j.getPropertyValueOrDefault(d,"Language"))),o.location=a.observable(new c(j.getPropertyValueOrDefault(d,"Location"))),o.displayStartDateTime=a.observable(j.getPropertyValueOrDefault(d,"DisplayStartDateTime")),o.duration=a.observable(new k(j.getPropertyValueOrDefault(d,"Duration"))),o.displayKind=a.observable(j.getPropertyValueOrDefault(d,"DisplayKind")),o.status=a.observable(j.getPropertyValueOrDefault(d,"Status")),o.displayVersion=a.observable(j.getPropertyValueOrDefault(d,"DisplayVersion")),o.displayStatus=a.observable(j.getPropertyValueOrDefault(d,"DisplayStatus")),o.isUnlisted=a.observable(j.getPropertyValueOrDefault(d,"IsUnlisted")),o.displayIsUnlisted=a.computed(function(){return f.boolToYesNo(this.isUnlisted(),!1)},o),o.displayDeliveryMethods=function(){var a=[];return[e.learningObjectKind.WbtCourse,e.learningObjectKind.Curriculum,e.learningObjectKind.Link,e.learningObjectKind.LearningPath,e.learningObjectKind.InstructionalVideo].indexOf(o.kind())>-1&&a.push(n.getString("UI_TrainingPage_DeliveryMethodOnline_Title")),o.kind()===e.learningObjectKind.IltCourse&&a.push(n.getString("UI_TrainingPage_DeliveryMethodClassroom_Title")),a.length>0&&a.join(", ")},o.registrationCount=a.observable(null),d&&void 0!==d.RegistrationCount&&null!==d.RegistrationCount&&o.registrationCount(d.RegistrationCount),o.maxCapacity=a.observable(null),d&&void 0!==d.MaxCapacity&&null!==d.MaxCapacity&&o.maxCapacity(d.MaxCapacity),o.displayEnrollmentCount=a.computed(function(){return(o.registrationCount()||"0")+"/"+o.maxCapacity()},o),o.majorVersion=a.observable(j.getPropertyValueOrDefault(d,"MajorVersion")),o.minorVersion=a.observable(j.getPropertyValueOrDefault(d,"MinorVersion")),o.patch=a.observable(j.getPropertyValueOrDefault(d,"Patch")),o.displayVersion=a.computed(function(){return f.getDisplayVersion(this.majorVersion(),this.minorVersion(),this.patch())},o),o.contentTypeDisplay=a.observable(j.getPropertyValueOrDefault(d,"ContentTypeDisplay")),o.displaySchedulingStatus=a.observable(j.getPropertyValueOrDefault(d,"DisplaySchedulingStatus")),o.classifications=a.observableArray([]),o.jobRoles=a.observableArray([]),o.experienceLevels=a.observableArray([]),o.trainingFormats=a.observableArray([]),o.tags=a.observableArray([]),m=j.getPropertyValueOrDefault(d,"Classifications"),null!==m&&void 0!==m&&m.length>0)for(l in m)m.hasOwnProperty(l)&&(o.classifications.push(new g(m[l])),h.isJobRole(m[l].Id)===!0?o.jobRoles.push(m[l].Value):h.isExperienceLevel(m[l].Id)===!0?o.experienceLevels.push(m[l].Value):h.isTrainingFormat(m[l].Id)===!0?o.trainingFormats.push(m[l].Value):o.tags.push(m[l].Value));o.editPageUrl=a.observable(""),o.detailsPageUrl=a.observable(""),d&&(o.editPageUrl(i.getAdminManagementPageUrl(o.kind(),o.id(),e.adminPageMode.update)),o.detailsPageUrl(i.getCustomerDetailsPageUrl(o.kind(),o.id()))),o.isDisabled=a.observable(!1),o.isSelf=a.observable(!1)};return o.createLearningObject=function(a){var b={Id:a.id,Title:a.title,Kind:a.kind};return new o(b)},o.sortObservableArrayByTitle=function(a){null!==a&&void 0!==a&&a.sort(function(a,b){var c,d;return c=a.title().toLowerCase(),d=b.title().toLowerCase(),c===d?0:c<d?-1:1})},o.setNotificationGroups=function(b,c){var e,f,g,h;if(null!==b&&void 0!==b&&(b.notificationGroups=a.observableArray([]),c)){if(c.NotificationGroups&&0!==c.NotificationGroups.length){e=null,g=-1;for(h in c.NotificationGroups)!c.NotificationGroups.hasOwnProperty(h)||c.NotificationGroups[h].Audience&&c.NotificationGroups[h].Audience.FullPath||(g=h,e=c.NotificationGroups[h]);null===e?c.NotificationGroups.splice(0,0,new d({})):0!==Number(g)&&(c.NotificationGroups.splice(g,1),c.NotificationGroups.splice(0,0,e))}else c.NotificationGroups=[{}];for(h in c.NotificationGroups)c.NotificationGroups.hasOwnProperty(h)&&(f=new d(c.NotificationGroups[h]),b.notificationGroups.push(f),d.sortNotificationsByTriggerType(f))}},o.getDetailsPageUrl=function(a,b){var c;if(l.isStringNullOrWhiteSpace(a)||isNaN(a))throw m.createInstance("learningObjectId");if(l.isStringNullOrWhiteSpace(b)||isNaN(b))throw m.createInstance("learningObjectKind");return c="?id="+a,b===e.learningObjectKind.IltSession||b===e.learningObjectKind.VirtualIltSession?o.sessionDetailsPageBaseUrl+c:b===e.learningObjectKind.WbtCourse?o.wbcDetailsPageBaseUrl+c:b===e.learningObjectKind.Curriculum||b===e.learningObjectKind.LearningPath?o.curriculumDetailsPageBaseUrl+c:""},o.courseDetailsPageBaseUrl="/training/schedule",o.sessionDetailsPageBaseUrl="/learningobject/ilt",o.wbcDetailsPageBaseUrl="/learningobject/wbc",o.curriculumDetailsPageBaseUrl="/learningobject/curriculum",o.courseAdminPageBaseUrl="/admin/course",o.sessionAdminPageBaseUrl="/admin/session",o.wbcAdminPageBaseUrl="/admin/webbasedcourse",o.curriculumAdminPageBaseUrl="/admin/curriculum",o.videoAdminPageBaseUrl="/admin/video",o});