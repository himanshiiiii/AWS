/** Copyright 2018 Amazon.com Inc. or its affiliates. All Rights Reserved. **/
define(["knockoutjs","viewModelHelper","learningObjectSummary","enums","stringHelper","misc","order","userSubscriptionState"],function(a,b,c,d,e,f,g,h){var i=function(i,j){var k,l=this;l.kind=a.observable(b.getPropertyValueOrDefault(i,"Kind")),l.displayKind=a.observable(b.getPropertyValueOrDefault(i,"DisplayKind")),l.userId=a.observable(b.getPropertyValueOrDefault(i,"UserId")),l.displayLastStatusUpdateDateTime=a.observable(b.getPropertyValueOrDefault(i,"DisplayLastStatusUpdateDateTime")),l.SessionBuildingName=a.observable(b.getPropertyValueOrDefault(i,"SessionBuildingName")),l.SessionLocationDisplayTitle=a.observable(b.getPropertyValueOrDefault(i,"SessionLocationDisplayTitle")),l.ShouldHideLocation=a.observable(b.getPropertyValueOrDefault(i,"ShouldHideLocation")),l.learningObject=a.observable(new c(b.getPropertyValueOrDefault(i,"LearningObject"),l.SessionBuildingName(),l.SessionLocationDisplayTitle(),l.ShouldHideLocation())),l.surveyId=a.observable(b.getPropertyValueOrDefault(i,"SurveyId")),l.evaluationCompletionId=a.observable(b.getPropertyValueOrDefault(i,"EvaluationCompletionId")),l.evaluationLink=a.observable(b.getPropertyValueOrDefault(i,"EvaluationLink")),l.hasCompletedEvaluation=a.computed(function(){return!e.isStringNullOrWhiteSpace(this.evaluationCompletionId())},l),l.score=a.observable(b.getPropertyValueOrDefault(i,"Score")),l.grade=a.observable(b.getPropertyValueOrDefault(i,"Grade")),l.percentComplete=a.observable(b.getPropertyValueOrDefault(i,"PercentComplete")||0),l.subscriptionStateForLo=a.observable(new h(b.getPropertyValueOrDefault(i,"UserSubscriptionStateForLoTransitionResult"))),l.orderIds=a.observableArray([]),i&&i.OrderIds&&l.orderIds(i.OrderIds),l.refundableOrder=a.observable(new g(i?i.RefundableOrder:null)),l.hasRefundableOrder=a.computed(function(){return this.refundableOrder()&&this.refundableOrder().id()},l),l.curriculumComponents=a.observableArray([]),j?(l.id=a.observable(b.getPropertyValueOrDefault(i,"TranscriptId")),l.status=a.observable(b.getPropertyValueOrDefault(i,"Status")),l.displayStatus=a.observable(b.getPropertyValueOrDefault(i,"DisplayStatus")),l.rank=a.observable(b.getPropertyValueOrDefault(i,"Rank")),l.isRequired=a.observable(f.parseBool(b.getPropertyValueOrDefault(i,"IsRequired"))),l.isRequiredDisplayString=a.observable(f.boolToYesNo(b.getPropertyValueOrDefault(i,"IsRequired"))),l.canWithdraw=a.observable(!1),k={Id:b.getPropertyValueOrDefault(i,"LearningObjectId"),Kind:b.getPropertyValueOrDefault(i,"Kind"),DisplayKind:b.getPropertyValueOrDefault(i,"DisplayKind"),DisplayVersion:b.getPropertyValueOrDefault(i,"LearningObjectVersion"),Title:b.getPropertyValueOrDefault(i,"Title"),DeepLink:b.getPropertyValueOrDefault(i,"DeepLink"),Status:b.getPropertyValueOrDefault(i.LearningObject,"Status"),DisplayStatus:b.getPropertyValueOrDefault(i.LearningObject,"DisplayStatus"),DisplayStartDateTime:b.getPropertyValueOrDefault(i.LearningObject,"DisplayStartDateTime"),Location:b.getPropertyValueOrDefault(i.LearningObject,"Location")},l.learningObject(new c(k,l.SessionBuildingName(),l.SessionLocationDisplayTitle(),l.ShouldHideLocation()))):(l.id=a.observable(b.getPropertyValueOrDefault(i,"Id")),l.status=a.observable(b.getPropertyValueOrDefault(i,"Status")),l.displayStatus=a.observable(b.getPropertyValueOrDefault(i,"DisplayStatus")),l.canWithdraw=a.computed(function(){return(this.status()===d.transcriptStatus.registrationPending||this.status()===d.transcriptStatus.approvalPending||this.status()===d.transcriptStatus.waitlisted||this.status()===d.transcriptStatus.registered)&&!this.learningObject().isExpired()},l)),l.virtualLabClassroomLaunchUrl=a.observable(""),l.learningObject().isVirtualLabClassroom()&&l.virtualLabClassroomLaunchUrl("/QwikLab/ClassroomSso?transcriptId="+l.id()),l.openUrl=a.observable(""),l.learningObject().isCurriculum()||l.learningObject().isLearningPath()?l.openUrl("/transcript/curriculumplayer?transcriptId="+l.id()):l.learningObject().isVILt()&&l.openUrl("/transcript/ViltTranscriptDetail?transcriptId="+l.id()),l.elementId=a.observable("__element_transcript_"+this.id()),l.loInactiveMessageElementId=a.observable("__lo_inactive_alert_"+this.id()),l.isExpanded=a.observable(!1),l.isRefreshing=a.observable(!1),l.certificateUrl=a.observable("/transcript/CompletionCertificateHtml?transcriptid="+this.id()),l.subscriptionRequired=a.computed(function(){return l.subscriptionStateForLo().loUserSubscriptionState()===d.UserSubscriptionState.UserSubscriptionRequired&&l.learningObject().status()===d.learningObjectStatus.active},l),l.subscriptionActive=a.computed(function(){return l.subscriptionStateForLo().loUserSubscriptionState()===d.UserSubscriptionState.ActiveUserSubscriptionExists&&l.learningObject().status()===d.learningObjectStatus.active},l),l.allowLaunch=a.computed(function(){return(l.learningObject().isWbt()||l.learningObject().isLink()||l.learningObject().isVideo())&&this.status()!==d.transcriptStatus.canceled&&this.status()!==d.transcriptStatus.withdrawn&&l.learningObject().status()===d.learningObjectStatus.active},l),l.allowOpen=a.computed(function(){return(l.learningObject().isCurriculum()||l.learningObject().isVILt()||l.learningObject().isLearningPath())&&this.status()!==d.transcriptStatus.canceled&&this.status()!==d.transcriptStatus.withdrawn&&l.learningObject().status()===d.learningObjectStatus.active},l)};return i});