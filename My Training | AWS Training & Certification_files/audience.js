/** Copyright 2018 Amazon.com Inc. or its affiliates. All Rights Reserved. **/
define(["knockoutjs","viewModelHelper","enums","argumentNullError","stringHelper","misc"],function(a,b,c,d,e,f){var g=function(d,h){var i;void 0!==h&&null!==h||(h=!0),this.exists=a.observable(h),this.name=a.observable(b.getPropertyValueOrDefault(d,"Name")),this.fullPath=a.observable(b.getPropertyValueOrDefault(d,"FullPath")),this.normalizedFullPath=a.computed(function(){return null!==this.fullPath()&&void 0!==this.fullPath()?g.normalizeFullPath(this.fullPath()):""},this),!this.name()&&this.fullPath()&&this.name(g.getNameFromPath(this.fullPath())),this.statusString=a.observable(b.getPropertyValueOrDefault(d,"Status").toString()),this.displayStatus=a.observable(b.getPropertyValueOrDefault(d,"DisplayStatus")),this.status=a.computed(function(){return f.parseInt(this.statusString())},this),this.parentAudiencePath=a.observable(""),e.isStringNullOrWhiteSpace(this.fullPath)||(i=this.fullPath().split(g.pathDelimiter),i.length>1&&(i.pop(),this.parentAudiencePath(i.join(g.pathDelimiter)))),this.updatedFullPath=a.computed(function(){return e.isStringNullOrWhiteSpace(this.name())?"":this.parentAudiencePath()+g.pathDelimiter+this.name()},this),this.displayFullPath=a.computed(function(){return e.isStringNullOrWhiteSpace(this.updatedFullPath())?"":decodeURIComponent(this.updatedFullPath())},this),this.childrenCount=a.observable(b.getPropertyValueOrDefault(d,"ChildrenCount")),this.displayChildrenCount=a.computed(function(){return this.childrenCount()===-1?"1000+":this.childrenCount().toString()},this),this.children=a.observableArray([]),this.childrenRetrieved=a.observable(!1),this.usersCount=a.observable(b.getPropertyValueOrDefault(d,"UsersCount")),this.displayUsersCount=a.computed(function(){return this.usersCount()===-1?"1000+":this.usersCount().toString()},this),this.users=a.observableArray([]),this.usersRetrieved=a.observable(!1),this.canBeDeleted=a.computed(function(){return!(!this.childrenRetrieved()||this.children().length>0||!this.usersRetrieved()||this.users().length>0)},this),this.isRootAudience=a.observable(""===this.parentAudiencePath()),this.displayIsRootAudience=a.computed(function(){return f.boolToYesNo(this.isRootAudience())},this),this.parentAudienceEditPageUrl=a.observable(g.adminPageBaseUrl+"?fullpath="+encodeURIComponent(this.parentAudiencePath())+"&mode="+c.adminPageMode.update),this.copyPageUrl=a.observable(g.adminPageBaseUrl+"?fullpath="+encodeURIComponent(this.fullPath())+"&mode="+c.adminPageMode.copy),this.editPageUrl=a.observable(g.adminPageBaseUrl+"?fullpath="+encodeURIComponent(this.fullPath())+"&mode="+c.adminPageMode.update)};return g.adminPageBaseUrl="/admin/audience",g.pathDelimiter="/",g.getRootIdFromPath=function(a){var b;if(e.isStringNullOrWhiteSpace(a))throw d.createInstance("fullPath");if(b=a.split("/"),b&&b.length>0)return b[0]},g.getNameFromPath=function(a){var b;if(e.isStringNullOrWhiteSpace(a))throw d.createInstance("fullPath");return b=a.split("/"),b&&b.length>0?b[b.length-1]:""},g.normalizeFullPath=function(a){return e.isStringNullOrWhiteSpace(a)?a:a.replace(/\//g,"-")},g});