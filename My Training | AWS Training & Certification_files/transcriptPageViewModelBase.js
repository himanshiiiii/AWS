/** Copyright 2018 Amazon.com Inc. or its affiliates. All Rights Reserved. **/
define(["jquery","knockoutjs","jqueryHelper","curriculumRepository","webBasedCourseRepository","videoRepository","linkRepository","sessionRepository","curriculum","webBasedCourse","link","session","video","awsSessionRepository","mapControl","resourceManager","argumentNullError","learningObjectKind","idlerHelper","dialogBox","enums","learningObjectViewModelFactory"],function($,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=function(){var g=this;g.divCurriculumDetails=b.select("#divCurriculumDetails"),g.divWebBasedCourseDetails=b.select("#divWebBasedCourseDetails"),g.divLinkDetails=b.select("#divLinkDetails"),g.divVideoDetails=b.select("#divVideoDetails"),g.divSessionDetails=b.select("#divSessionDetails"),g.learningObject=a.observable(u.createFromWebModel(t.learningObjectKind.IltCourse,null,!1)),g.isLearningObjectCurriculum=a.observable(!1),g.isLearningObjectWbc=a.observable(!1),g.isLearningObjectLink=a.observable(!1),g.isLearningObjectVideo=a.observable(!1),g.isLearningObjectSession=a.observable(!1),g.onNotAvailableButtonClicked=function(a){if(!a)throw p.createInstance("transcript");$("#"+a.loInactiveMessageElementId()).slideToggle()},g.showLearningObjectDetails=function(a){if(!a)throw p.createInstance("transcript");g.isLearningObjectCurriculum(!1),g.isLearningObjectWbc(!1),g.isLearningObjectLink(!1),g.isLearningObjectVideo(!1),g.isLearningObjectSession(!1),q.isCurriculum(a.learningObject().kind())?g.getCurriculum(a.learningObject().id(),a.learningObject().title()):q.isIlt(a.learningObject().kind())?g.getSession(a.learningObject().id(),a.learningObject().title()):a.learningObject().kind()===t.learningObjectKind.WbtCourse?g.getWebBasedCourse(a.learningObject().id(),a.learningObject().title()):a.learningObject().kind()===t.learningObjectKind.Link?g.getLink(a.learningObject().id(),a.learningObject().title()):a.learningObject().kind()===t.learningObjectKind.InstructionalVideo&&g.getVideo(a.learningObject().id(),a.learningObject().title())},g.getCurriculum=function(a,b){r.showFull(),c.getById(a,g.onGetCurriculumCompleted,g,b)},g.onGetCurriculumCompleted=function(a,b,c,d){return r.hideFull(),b||!a?void s.showWebServiceErrorMessage(c):(g.learningObject(u.createFromWebModel(t.learningObjectKind.Curriculum,a,!1)),g.isLearningObjectCurriculum(!0),void s.show(g.divCurriculumDetails,d))},g.getWebBasedCourse=function(a,b){r.showFull(),d.getWebBasedCourseById(a,g.onGetWebBasedCourseCompleted,g,b)},g.onGetWebBasedCourseCompleted=function(a,b,c,d){return r.hideFull(),b||!a?void s.showWebServiceErrorMessage(c):(g.learningObject(u.createFromWebModel(t.learningObjectKind.WbtCourse,a,!1)),g.isLearningObjectWbc(!0),void s.show(g.divWebBasedCourseDetails,d))},g.getLink=function(a,b){r.showFull(),f.getById(a,g.onGetLinkCompleted,g,b)},g.onGetLinkCompleted=function(a,b,c,d){return r.hideFull(),b||!a?void s.showWebServiceErrorMessage(c):(g.learningObject(u.createFromWebModel(t.learningObjectKind.Link,a,!1)),g.isLearningObjectLink(!0),void s.show(g.divLinkDetails,d))},g.getVideo=function(a,b){r.showFull(),e.getVideoById(a,g.onGetVideoCompleted,g,b)},g.onGetVideoCompleted=function(a,b,c,d){return r.hideFull(),b||!a?void s.showWebServiceErrorMessage(c):(g.learningObject(u.createFromWebModel(t.learningObjectKind.InstructionalVideo,a,!1)),g.isLearningObjectVideo(!0),void s.show(g.divVideoDetails,d))},g.getSession=function(a,b){r.showFull(),m.getSessionById(a,g.onGetSessionCompleted,g,b,!1)},g.onGetSessionCompleted=function(a,b,c,d){return b||!a?void s.showWebServiceErrorMessage(c):(g.learningObject(u.createFromWebModel(t.learningObjectKind.IltSession,a,!1,!0)),g.isLearningObjectSession(!0),m.getSessionMaterialById(a.Id,g.onGetSessionMaterialCompleted,g),s.show(g.divSessionDetails,d),void n.showMap(a.Location.Coordinates.Latitude,a.Location.Coordinates.Longitude,"divIltDetailsMapCanvas"))},g.onGetSessionMaterialCompleted=function(a,b,c){r.hideFull(),!b&&a&&(g.learningObject().preWorkInstructions(a.PreWorkInstructions||""),g.learningObject().notes(a.Notes||""))}};return v});